$(function(){var a=function(){function a(a,b,c){this.initialized(a,b,c),this.listener()}return a.prototype.initialized=function(a,b,c){this.alredy_count=!1,this.$target=$(a),this.event=b,this.api={url:c,data:this.$target.data("id")}},a.prototype.listener=function(){var a=this;this.$target.on(this.event,function(){a.count(this)})},a.prototype.count=function(){return this.alredy_count?0:(this.alredy_count=!0,void $.get(this.api.url,{id:this.api.data}))},a}(),b=function(){var b=function(b){a.call(this,b,"click","dl_count")};return b}(),c=function(){var b=function(b){a.call(this,b,"play","play_count")};return b}();Object.setPrototypeOf(b.prototype,a.prototype),Object.setPrototypeOf(c.prototype,a.prototype),$(".downloads a").each(function(){new b(this)}),$(".audio").each(function(){new c(this)});var d=function(){function a(a){this.initialized(a),this.listener()}return a.prototype.initialized=function(a){this.$target=$(a),this.$sound_dom=$("#sound-id-"+this.$target.data("id")),this.$comment_form=this.$sound_dom.find(".comment_form"),this.data_id=this.$target.data("id");var b=this;$.get("get_comment_count",{data_id:this.data_id},function(a){b.comment_count=a})},a.prototype.listener=function(){var a=this;this.$target.on("click",function(){a.send_message(a.$comment_form.val()),a.show_comment(a.$comment_form.val()),a.$comment_form.val("")})},a.prototype.send_message=function(a){$.get("send_comment",{comment:a,data_id:this.data_id})},a.prototype.show_comment=function(a){var a='<p class="comment_text">'+a+"</p>";this.comment_count<3?this.$sound_dom.find(".comments").append(a):this.$sound_dom.find(".show_comment_button").prev().after(a)},a}();$(".comment_submit").each(function(){new d(this)})});